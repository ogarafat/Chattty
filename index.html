<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>Context-aware à¦¬à¦¾à¦‚à¦²à¦¾ Reply Bot</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #f6f8fa;
        display: flex;
        justify-content: center;
        padding: 50px;
    }
    .chat-container {
        width: 600px;
        background: #fff;
        border: 1px solid #d1d5da;
        border-radius: 6px;
        box-shadow: 0 3px 6px rgba(0,0,0,0.1);
        overflow: hidden;
    }
    .header {
        background: #24292e;
        color: #fff;
        padding: 10px 15px;
        font-weight: bold;
        font-size: 18px;
    }
    .messages {
        height: 400px;
        overflow-y: auto;
        padding: 15px;
        background: #f6f8fa;
        display: flex;
        flex-direction: column;
    }
    .message {
        margin-bottom: 12px;
        line-height: 1.5;
        padding: 10px;
        border-radius: 6px;
        max-width: 80%;
        word-wrap: break-word;
    }
    .user {
        background: #dbedff;
        align-self: flex-end;
        text-align: right;
        margin-left: auto;
    }
    .bot {
        background: #e6ffed;
        text-align: left;
        margin-right: auto;
    }
    .input-container {
        display: flex;
        border-top: 1px solid #d1d5da;
        padding: 10px;
        background: #fff;
    }
    .input-container input {
        flex: 1;
        padding: 8px 12px;
        border: 1px solid #d1d5da;
        border-radius: 4px;
        font-size: 14px;
    }
    .input-container button {
        margin-left: 10px;
        padding: 8px 12px;
        background: #28a745;
        color: #fff;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-weight: bold;
    }
    .input-container button:hover {
        background: #218838;
    }
</style>
</head>
<body>

<div class="chat-container">
    <div class="header">Context-aware à¦¬à¦¾à¦‚à¦²à¦¾ Reply Bot</div>
    <div class="messages" id="messages"></div>
    <div class="input-container">
        <input type="text" id="userInput" placeholder="à¦†à¦ªà¦¨à¦¾à¦° à¦®à§‡à¦¸à§‡à¦œ à¦²à¦¿à¦–à§à¦¨...">
        <button onclick="sendMessage()">Send</button>
    </div>
</div>

<script>
const messagesContainer = document.getElementById('messages');
const input = document.getElementById('userInput');

// Conversation memory
let memory = {
    username: null
};

// Predefined templates
const replies = {
    greeting: [
        "à¦¹à§à¦¯à¦¾à¦²à§‹! à¦•à§‡à¦®à¦¨ à¦†à¦›à§‡à¦¨?",
        "à¦¶à§à¦­ à¦¸à¦•à¦¾à¦²! à¦†à¦¶à¦¾ à¦•à¦°à¦¿ à¦­à¦¾à¦²à§‹ à¦†à¦›à§‡à¦¨",
        "à¦¹à¦¾à¦‡! à¦•à§‡à¦®à¦¨ à¦šà¦²à¦›à§‡?"
    ],
    feeling: [
        "à¦†à¦®à¦¿ à¦­à¦¾à¦²à§‹ à¦†à¦›à¦¿, à¦†à¦ªà¦¨à¦¿ à¦•à§‡à¦®à¦¨ à¦†à¦›à§‡à¦¨?",
        "à¦§à¦¨à§à¦¯à¦¬à¦¾à¦¦, à¦†à¦ªà¦¨à¦¾à¦° à¦–à§‹à¦à¦œ à¦¨à§‡à¦“à¦¯à¦¼à¦¾à¦° à¦œà¦¨à§à¦¯",
        "à¦†à¦®à¦¿ à¦ à¦¿à¦• à¦†à¦›à¦¿ ðŸ˜Š"
    ],
    name: [
        "à¦†à¦®à¦¾à¦° à¦¨à¦¾à¦® à¦¬à¦¾à¦‚à¦²à¦¾ à¦°à¦¿à¦ªà§à¦²à¦¾à¦‡ à¦¬à¦Ÿ ðŸ¤–",
        "à¦†à¦ªà¦¨à¦¿ à¦šà¦¾à¦‡à¦²à§‡ à¦†à¦®à¦¾à¦•à§‡ à¦•à§‹à¦¨à§‹ à¦¨à¦¾à¦® à¦¦à¦¿à¦¤à§‡ à¦ªà¦¾à¦°à§‡à¦¨",
        "à¦†à¦®à¦¿ à¦†à¦ªà¦¨à¦¾à¦° à¦¬à¦¨à§à¦§à§ à¦¹à¦¿à¦¸à§‡à¦¬à§‡ à¦†à¦›à¦¿"
    ],
    thanks: [
        "à¦†à¦ªà¦¨à¦¾à¦•à§‡à¦“ à¦§à¦¨à§à¦¯à¦¬à¦¾à¦¦ ðŸ˜Š",
        "à¦¸à¦°à§à¦¬à¦¦à¦¾ à¦¸à¦¾à¦¹à¦¾à¦¯à§à¦¯ à¦•à¦°à¦¤à§‡ à¦ªà§à¦°à¦¸à§à¦¤à§à¦¤!",
        "à¦–à§à¦¬ à¦­à¦¾à¦²à§‹ à¦²à¦¾à¦—à¦²à§‹ à¦¸à¦¾à¦¹à¦¾à¦¯à§à¦¯ à¦•à¦°à¦¤à§‡ à¦ªà¦¾à¦°à¦¾à¦¯à¦¼"
    ],
    bye: [
        "à¦†à¦¬à¦¾à¦° à¦•à¦¥à¦¾ à¦¹à¦¬à§‡, à¦­à¦¾à¦²à§‹ à¦¥à¦¾à¦•à¦¬à§‡à¦¨ ðŸŒ¸",
        "à¦¬à¦¿à¦¦à¦¾à¦¯à¦¼! à¦¸à§à¦¸à§à¦¥ à¦¥à¦¾à¦•à§à¦¨",
        "à¦šà¦²à§à¦¨, à¦†à¦¬à¦¾à¦° à¦¦à§‡à¦–à¦¾ à¦¹à¦¬à§‡"
    ],
    default: [
        "à¦¦à§à¦ƒà¦–à¦¿à¦¤, à¦†à¦®à¦¿ à¦¬à§à¦à¦¤à§‡ à¦ªà¦¾à¦°à¦¿à¦¨à¦¿ ðŸ˜…",
        "à¦†à¦¬à¦¾à¦° à¦à¦•à¦Ÿà§ à¦¸à¦¹à¦œ à¦•à¦°à§‡ à¦¬à¦²à¦¬à§‡à¦¨?",
        "à¦†à¦®à¦¿ à¦¸à¦¾à¦¹à¦¾à¦¯à§à¦¯ à¦•à¦°à¦¤à§‡ à¦šà¦¾à¦‡, à¦†à¦°à§‡à¦•à¦¬à¦¾à¦° à¦¬à¦²à§à¦¨"
    ]
};

// Add message to chat
function addMessage(sender, text) {
    const div = document.createElement('div');
    div.className = 'message ' + sender;
    div.innerText = text;
    messagesContainer.appendChild(div);
    messagesContainer.scrollTop = messagesContainer.scrollHeight;
}

// Context-aware reply logic
function getReply(msg) {
    msg = msg.toLowerCase();

    // Capture user name
    if(msg.includes("à¦†à¦®à¦¾à¦° à¦¨à¦¾à¦®")) {
        const nameMatch = msg.match(/à¦†à¦®à¦¾à¦° à¦¨à¦¾à¦® (\w+)/);
        if(nameMatch) {
            memory.username = nameMatch[1];
            return `à¦¸à§à¦¨à§à¦¦à¦°! à¦†à¦®à¦¿ à¦®à¦¨à§‡ à¦°à¦¾à¦–à¦¬ à¦¯à§‡ à¦†à¦ªà¦¨à¦¾à¦° à¦¨à¦¾à¦® ${memory.username}`;
        }
    }

    if(msg.includes("à¦¹à§à¦¯à¦¾à¦²à§‹") || msg.includes("à¦¹à¦¾à¦‡") || msg.includes("à¦¶à§à¦­")) {
        return randomChoice(replies.greeting);
    }
    if(msg.includes("à¦•à§‡à¦®à¦¨")) {
        if(memory.username) {
            return `à¦†à¦®à¦¿ à¦­à¦¾à¦²à§‹ à¦†à¦›à¦¿, ${memory.username}! à¦†à¦ªà¦¨à¦¿ à¦•à§‡à¦®à¦¨ à¦†à¦›à§‡à¦¨?`;
        } else {
            return randomChoice(replies.feeling);
        }
    }
    if(msg.includes("à¦¨à¦¾à¦® à¦•à¦¿")) {
        return randomChoice(replies.name);
    }
    if(msg.includes("à¦§à¦¨à§à¦¯à¦¬à¦¾à¦¦")) {
        return randomChoice(replies.thanks);
    }
    if(msg.includes("à¦¬à¦¿à¦¦à¦¾à¦¯à¦¼") || msg.includes("bye")) {
        return randomChoice(replies.bye);
    }

    // Default fallback
    return randomChoice(replies.default);
}

// Pick random from array
function randomChoice(arr) {
    return arr[Math.floor(Math.random() * arr.length)];
}

// Send message
function sendMessage() {
    const msg = input.value.trim();
    if(!msg) return;
    addMessage('user', msg);
    input.value = '';

    // Typing delay simulation
    addMessage('bot', 'typing...');
    setTimeout(() => {
        messagesContainer.removeChild(messagesContainer.lastChild);
        addMessage('bot', getReply(msg));
    }, 800);
}

// Send message on Enter key
input.addEventListener('keypress', function(e) {
    if(e.key === 'Enter') sendMessage();
});
</script>

</body>
</html>
